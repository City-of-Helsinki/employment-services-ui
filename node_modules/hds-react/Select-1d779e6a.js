import e,{useState as t,useRef as l,useMemo as o,useEffect as c,useCallback as r}from"react";import{c as d}from"./classNames-51fcabcb.js";import{s as a}from"./style-inject.es-4a6aca40.js";import"./Icon.module-e854ac32.js";import{I as i}from"./IconAlertCircle-2c190eb1.js";import{I as n}from"./IconAngleDown-66217044.js";import{I as s}from"./IconCrossCircle-e27acebb.js";import m from"lodash.uniqueid";import"./base.min-dacc0a02.js";import{u}from"./useTheme-4d715126.js";import{u as _,a as b}from"./downshift.esm-e321a728.js";import p from"lodash.isequal";import{F as v}from"./FieldLabel-77d98fa7.js";import{useVirtual as g}from"react-virtual";import h from"react-merge-refs";import S from"react-use-measure";import{ResizeObserver as I}from"@juggle/resize-observer";import{T as f}from"./Tag-ff2dd084.js";import{D as w,g as x,a as k}from"./DropdownMenu-cc760817.js";import{g as y,a as j}from"./getIsElementBlurred-bdcd45d0.js";var D={button:"Select-module_button__1aIsm",wrapper:"Select-module_wrapper__1WQXs",multiselect:"Select-module_multiselect__fxewG",menuItem:"Select-module_menuItem__3bgv5",highlighted:"Select-module_highlighted__2lpqn",checkbox:"Select-module_checkbox__22SQm",selected:"Select-module_selected__1tL2u",angleIcon:"Select-module_angleIcon__2-9AD",root:"Select-module_root__Ka5uO",open:"Select-module_open__2jpqY",menu:"Select-module_menu__1H2aU",icon:"Select-module_icon___tUDP",overflow:"Select-module_overflow__EZdsW",disabled:"Select-module_disabled__3MKDP",virtualized:"Select-module_virtualized__2m1gf",helperText:"Select-module_helperText__1Bnwn",invalid:"Select-module_invalid__2Vibs",errorText:"Select-module_errorText__bT-Fo",invalidIcon:"Select-module_invalidIcon__3AtaY",placeholder:"Select-module_placeholder__21c0j"};a(".Select-module_button__1aIsm{background:none;border:none;color:inherit;cursor:pointer;font:inherit;padding:0}.Select-module_multiselect__fxewG .Select-module_button__1aIsm:focus:not(:active) .Select-module_angleIcon__2-9AD,.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_highlighted__2lpqn .Select-module_checkbox__22SQm,.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_highlighted__2lpqn.Select-module_selected__1tL2u .Select-module_checkbox__22SQm,.Select-module_wrapper__1WQXs:focus-within{box-shadow:0 0 0 var(--focus-outline-width) var(--focus-outline-color)}.Select-module_root__Ka5uO{--border-width:2px;--divider-width:1px;--focus-outline-width:3px;--dropdown-height:var(--spacing-3-xl);--menu-item-height:calc(var(--dropdown-height) - var(--border-width) * 2);--icon-size:var(--spacing-m);--menu-z-index:10;--dropdown-background-default:var(--color-white);--dropdown-background-disabled:var(--color-black-10);--dropdown-border-color-default:var(--color-black-50);--dropdown-border-color-hover:var(--color-black-90);--dropdown-border-color-hover-invalid:var(--color-error-dark);--dropdown-border-color-focus:var(--color-black-90);--dropdown-border-color-invalid:var(--color-error);--dropdown-border-color-disabled:var(--color-black-10);--dropdown-color-default:var(--color-black-90);--dropdown-color-disabled:var(--color-black-40);--focus-outline-color:var(--color-coat-of-arms);--helper-color-default:var(--color-black-60);--helper-color-invalid:var(--color-error);--menu-divider-color:var(--color-black-20);--menu-item-background-default:var(--color-white);--menu-item-background-hover:var(--color-bus);--menu-item-background-selected:var(--color-white);--menu-item-background-selected-hover:var(--color-bus);--menu-item-background-disabled:var(--color-white);--menu-item-color-default:var(--color-black-90);--menu-item-color-hover:var(--color-white);--menu-item-color-selected:var(--color-black-90);--menu-item-color-selected-hover:var(--color-white);--menu-item-color-disabled:var(--color-black-40);--menu-item-icon-color-selected:var(--color-white);--menu-item-icon-color-disabled:var(--color-black-40);--multiselect-checkbox-background-selected:var(--color-bus);--multiselect-checkbox-background-disabled:var(--color-black-10);--multiselect-checkbox-border-default:var(--color-black-50);--multiselect-checkbox-border-hover:var(--color-black-90);--multiselect-checkbox-border-disabled:var(--color-black-10);--multiselect-checkbox-color-default:transparent;--multiselect-checkbox-color-selected:var(--color-white);--multiselect-checkbox-color-selected-disabled:var(--color-white);--placeholder-color:var(--color-black-60);position:relative}.Select-module_open__2jpqY.Select-module_root__Ka5uO .Select-module_angleIcon__2-9AD{transform:rotateX(180deg)}.Select-module_open__2jpqY.Select-module_root__Ka5uO .Select-module_menu__1H2aU{display:block}.Select-module_wrapper__1WQXs{background-color:var(--dropdown-background-default);border:var(--border-width) solid var(--dropdown-border-color-default);box-sizing:border-box;min-height:var(--dropdown-height);position:relative;width:100%}.Select-module_wrapper__1WQXs:focus-within{border-color:var(--dropdown-border-color-focus)}.Select-module_wrapper__1WQXs:hover{border-color:var(--dropdown-border-color-hover)}.Select-module_wrapper__1WQXs:focus-within,.Select-module_wrapper__1WQXs:hover{transition:border-color 85ms ease-out}.Select-module_icon___tUDP{color:var(--dropdown-color-default);display:flex;margin-right:var(--spacing-2-xs)}.Select-module_angleIcon__2-9AD{color:var(--dropdown-color-default);position:absolute;right:var(--spacing-s);top:var(--spacing-xs);transform:translateY(2px)}.Select-module_menu__1H2aU{border:solid var(--dropdown-border-color-focus);border-top-color:var(--menu-divider-color);border-width:var(--divider-width) var(--border-width) var(--border-width);bottom:0;display:none;left:0;list-style:none;margin:0;outline:none;padding:0;position:absolute;transform:translate(calc(var(--border-width) * -1),100%);width:100%;z-index:var(--menu-z-index)}.Select-module_overflow__EZdsW.Select-module_menu__1H2aU{overflow-y:scroll}.Select-module_menuItem__3bgv5{align-items:center;background-color:var(--menu-item-background-default);box-sizing:border-box;color:var(--menu-item-color-default);cursor:pointer;display:flex;font-size:var(--fontsize-body-l);justify-content:space-between;line-height:var(--lineheight-m);min-height:var(--menu-item-height);padding:var(--spacing-xs) var(--spacing-s)}.Select-module_highlighted__2lpqn.Select-module_menuItem__3bgv5{background-color:var(--menu-item-background-hover);color:var(--menu-item-color-hover)}.Select-module_selected__1tL2u.Select-module_menuItem__3bgv5{background-color:var(--menu-item-background-selected);color:var(--menu-item-color-selected)}.Select-module_highlighted__2lpqn.Select-module_selected__1tL2u.Select-module_menuItem__3bgv5{background-color:var(--menu-item-background-selected-hover);color:var(--menu-item-color-selected-hover)}.Select-module_disabled__3MKDP.Select-module_highlighted__2lpqn.Select-module_menuItem__3bgv5,.Select-module_disabled__3MKDP.Select-module_menuItem__3bgv5{background-color:var(--menu-item-background-disabled);color:var(--menu-item-color-disabled);cursor:not-allowed}.Select-module_virtualized__2m1gf.Select-module_menuItem__3bgv5{left:0;position:absolute;top:0;width:100%}.Select-module_helperText__1Bnwn{color:var(--helper-color-default);margin-top:var(--spacing-3-xs)}.Select-module_disabled__3MKDP .Select-module_wrapper__1WQXs{background-color:var(--dropdown-background-disabled);border-color:var(--dropdown-border-color-disabled);color:var(--dropdown-color-disabled)}.Select-module_disabled__3MKDP .Select-module_wrapper__1WQXs,.Select-module_disabled__3MKDP .Select-module_wrapper__1WQXs>*{cursor:not-allowed}.Select-module_disabled__3MKDP .Select-module_angleIcon__2-9AD,.Select-module_disabled__3MKDP .Select-module_icon___tUDP{color:var(--dropdown-color-disabled)}.Select-module_invalid__2Vibs .Select-module_wrapper__1WQXs{border-color:var(--dropdown-border-color-invalid)}.Select-module_invalid__2Vibs .Select-module_wrapper__1WQXs:hover{border-color:var(--dropdown-border-color-hover-invalid)}.Select-module_invalid__2Vibs .Select-module_errorText__bT-Fo{align-items:center;color:var(--helper-color-invalid);display:flex;margin-top:var(--spacing-3-xs)}.Select-module_invalid__2Vibs .Select-module_invalidIcon__3AtaY{margin-right:var(--spacing-2-xs)}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5{justify-content:flex-start}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_highlighted__2lpqn,.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_highlighted__2lpqn.Select-module_selected__1tL2u,.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_selected__1tL2u{background-color:var(--menu-item-background-default);color:var(--menu-item-color-default)}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5 .Select-module_checkbox__22SQm{border:var(--spacing-4-xs) solid var(--multiselect-checkbox-border-default);box-sizing:border-box;color:var(--multiselect-checkbox-color-default);height:var(--icon-size);margin-right:var(--spacing-xs);width:var(--icon-size)}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_disabled__3MKDP .Select-module_checkbox__22SQm,.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_highlighted__2lpqn .Select-module_checkbox__22SQm{transition:border-color 85ms ease-out}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_highlighted__2lpqn .Select-module_checkbox__22SQm{border-color:var(--multiselect-checkbox-border-hover)}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_selected__1tL2u .Select-module_checkbox__22SQm{background-color:var(--multiselect-checkbox-background-selected);border:0;color:var(--multiselect-checkbox-color-selected)}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_disabled__3MKDP .Select-module_checkbox__22SQm{background-color:var(--multiselect-checkbox-background-disabled);border-color:var(--multiselect-checkbox-border-disabled)}.Select-module_multiselect__fxewG .Select-module_menuItem__3bgv5.Select-module_disabled__3MKDP.Select-module_selected__1tL2u .Select-module_checkbox__22SQm{color:var(--multiselect-checkbox-color-selected-disabled)}.Select-module_root__Ka5uO.Select-module_open__2jpqY .Select-module_angleIcon__2-9AD{transform:translateY(2px) rotateX(180deg)}.Select-module_button__1aIsm{align-items:center;color:var(--dropdown-color-default);display:flex;font-size:var(--fontsize-body-l);min-height:var(--menu-item-height);outline:none;padding:calc(var(--spacing-s) - var(--border-width) * 2) var(--spacing-s);width:100%}.Select-module_button__1aIsm.Select-module_placeholder__21c0j{color:var(--placeholder-color)}.Select-module_button__1aIsm.Select-module_placeholder__21c0j:disabled{color:var(--dropdown-color-disabled)}.Select-module_multiselect__fxewG .Select-module_button__1aIsm{height:100%;left:0;position:absolute;top:0;width:100%;z-index:0}");var A="SelectedItems-module_selectedItems__2m24K",O="SelectedItems-module_tag__13n3H",K="SelectedItems-module_hidden__2hyRx",L="SelectedItems-module_hiddenItemsCount__3MAEc",z="SelectedItems-module_itemsHidden__2ewH3",E="SelectedItems-module_noToggle__l2j9W",P="SelectedItems-module_clearButton__35tnp";a(".SelectedItems-module_selectedItems__2m24K .SelectedItems-module_hiddenItemsCount__3MAEc.SelectedItems-module_hidden__2hyRx,.SelectedItems-module_selectedItems__2m24K .SelectedItems-module_tag__13n3H.SelectedItems-module_hidden__2hyRx{left:-9999px;position:absolute;top:-9999px;visibility:hidden}.SelectedItems-module_selectedItems__2m24K{align-items:center;display:flex;flex-wrap:wrap;padding:var(--spacing-4-xs) calc((var(--spacing-s) - var(--border-width)) * 2 + (var(--icon-size) * 2)) calc(var(--spacing-s) - var(--border-width)) var(--spacing-4-xs)}.SelectedItems-module_selectedItems__2m24K.SelectedItems-module_itemsHidden__2ewH3{box-sizing:border-box;height:var(--menu-item-height);overflow:hidden}.SelectedItems-module_selectedItems__2m24K.SelectedItems-module_noToggle__l2j9W{padding-right:calc((var(--spacing-s) - var(--border-width)) * 2 + (var(--icon-size)))}.SelectedItems-module_selectedItems__2m24K .SelectedItems-module_tag__13n3H{margin:var(--spacing-xs) 0 0 var(--spacing-xs);position:relative;z-index:1}.SelectedItems-module_selectedItems__2m24K .SelectedItems-module_hiddenItemsCount__3MAEc{font-weight:700;margin:var(--spacing-xs) 0 0 var(--spacing-xs);opacity:1;pointer-events:none;transition:50ms cubic-bezier(.47,0,.75,.72);user-select:none}.SelectedItems-module_selectedItems__2m24K .SelectedItems-module_hiddenItemsCount__3MAEc.SelectedItems-module_hidden__2hyRx{opacity:0}.SelectedItems-module_clearButton__35tnp{background:none;border:none;color:inherit;cursor:pointer;font:inherit;padding:0;display:flex;outline:none;position:absolute;right:calc(var(--border-width) * -1);top:0;transform:translate(calc(var(--spacing-2-xl) * -1),calc(var(--menu-item-height) / 2 - 50%));z-index:1}.SelectedItems-module_clearButton__35tnp:focus{box-shadow:0 0 0 var(--focus-outline-width) var(--focus-outline-color)}.SelectedItems-module_clearButton__35tnp.SelectedItems-module_noToggle__l2j9W{transform:translate(calc(var(--spacing-s) * -1),calc(var(--menu-item-height) / 2 - 50%))}");const B=(e,t)=>null==e?void 0:e.replace("{value}",t),C=(e,t)=>{if(!e)return 0;const l=["".concat(t,"-left"),"".concat(t,"-right")],o=window.getComputedStyle(e);return l.map((e=>o.getPropertyValue(e).replace("px",""))).reduce(((e,t)=>e+parseInt(t,10)),0)},M=({activeIndex:r,className:a,clearable:i=!0,clearButtonAriaLabel:n,dropdownId:u,getSelectedItemProps:_,hideItems:b=!1,onClear:p,onRemove:v,optionLabelField:g,removeButtonAriaLabel:w,selectedItems:x,selectedItemsContainerRef:k,selectedItemSrLabel:y,setActiveIndex:j,toggleButtonHidden:D=!1})=>{const[M,{width:T,height:N}]=S({debounce:0,scroll:!1,polyfill:I}),[Q,W]=t(0),q=l(),R=q.current,G=k.current,[F,X]=o((()=>{if(!G)return[0,0];const e=G.childNodes||[];return[C(G,"padding"),C(e[0],"margin")]}),[G]);return c((()=>((e,t,l,o,c,r)=>{const d=[],a=[];if(t&&o){const i=[...t.childNodes].filter((e=>"DIV"===e.tagName)),n=o.offsetWidth+e,s=t.offsetWidth-n-l;[...i].reduce(((t,l)=>{const o=l.offsetWidth+e;return t+o<s?d.push(l):a.push(l),t+o}),0),c?(d.forEach((e=>e.classList.remove(K))),a.forEach((e=>e.classList.add(K))),r(a.length)):[...i].forEach((e=>e.classList.remove(K)))}})(X,G,F,R,b,W)),[X,G,F,N,R,b,x,W,T]),e.createElement(e.Fragment,null,e.createElement("div",{ref:h([M,k]),className:d(A,b&&z,D&&E,a)},x.map(((t,l)=>{const o=t[g],c=m("hds-tag-");return e.createElement(f,Object.assign({key:o,className:O,id:c,labelProps:{"aria-labelledby":"".concat(u,"-label ").concat(c,"-label")},deleteButtonAriaLabel:B(w,o),deleteButtonProps:{tabIndex:-1},onDelete:e=>{e.stopPropagation(),v(t)},srOnlyLabel:B(y,o)},_({selectedItem:t,index:l,onKeyDown:e=>{"Backspace"===e.key&&e.preventDefault()},onFocus:()=>j(l)})),o)})),e.createElement("span",{ref:q,className:d(L,(!b||0===Q)&&K)},"+",Q)),i&&e.createElement("button",{type:"button",className:d(P,D&&E),onClick:p,"aria-label":n,onFocus:()=>{-1===r&&(null==G?void 0:G.childNodes[0]).setAttribute("tabindex","0")}},e.createElement(s,null)))};function T({type:e,activeIndex:t},l,o){let c;const{FunctionRemoveSelectedItem:r,SelectedItemKeyDownBackspace:d}=_.stateChangeTypes;e!==r&&e!==d||(c=null==o?void 0:o.childNodes[l],!t&&c&&c.focus())}function N(e,{type:t,changes:l},o){const{FunctionRemoveSelectedItem:c,SelectedItemKeyDownBackspace:r}=_.stateChangeTypes;if(t===c||t===r){const t=e.selectedItems.findIndex((e=>!l.selectedItems.includes(e))),c=o?t+1:t,r=t===l.selectedItems.length;return Object.assign(Object.assign({},l),{activeIndex:r?t-1:c})}return l}const Q=o=>{var c,a,s,h;const{circularNavigation:S=!1,className:I,clearable:f=!0,disabled:A=!1,error:O,getA11ySelectionMessage:K=(()=>""),getA11yStatusMessage:L=(()=>""),helper:z,id:E=m("hds-select-"),invalid:P,isOptionDisabled:B,label:C,onBlur:Q=(()=>null),onFocus:W=(()=>null),optionLabelField:q="label",options:R=[],placeholder:G,required:F,style:X,theme:H,virtualized:V=!1,visibleOptions:Y=5,tooltipLabel:U,tooltipButtonLabel:Z,tooltipText:J}=o,$=o.multiselect&&void 0!==o.value,ee=u(D.root,H),te=l(),le=e.useRef(),[oe,ce]=t(!1),re=g({size:R.length,parentRef:le,estimateSize:r((()=>w),[]),overscan:Y}),{activeIndex:de,addSelectedItem:ae,getDropdownProps:ie,getSelectedItemProps:ne,removeSelectedItem:se,reset:me,selectedItems:ue,setActiveIndex:_e,setSelectedItems:be}=_(Object.assign(Object.assign(Object.assign({defaultActiveIndex:0,initialActiveIndex:0},o.multiselect&&{initialSelectedItems:null!==(c=o.defaultValue)&&void 0!==c?c:[]}),o.multiselect&&void 0!==o.value&&{selectedItems:null!==(a=o.value)&&void 0!==a?a:[]}),{getA11yRemovalMessage:null!==(s=o.multiselect&&o.getA11yRemovalMessage)&&void 0!==s?s:()=>"",onSelectedItemsChange:({selectedItems:e})=>o.multiselect&&"function"==typeof o.onChange&&o.onChange(e),onStateChange:e=>T(e,de,te.current),stateReducer:(e,t)=>N(e,t,$)})),{getItemProps:pe,getLabelProps:ve,getMenuProps:ge,getToggleButtonProps:he,highlightedIndex:Se,isOpen:Ie,selectedItem:fe,selectItem:we}=b(Object.assign(Object.assign(Object.assign({circularNavigation:S,id:E,items:R},!1===o.multiselect&&{initialSelectedItem:null!==(h=o.defaultValue)&&void 0!==h?h:null}),!1===o.multiselect&&void 0!==o.value&&{selectedItem:o.value}),{getA11ySelectionMessage:K,getA11yStatusMessage:L,itemToString:e=>{var t;return e&&null!==(t=e[q])&&void 0!==t?t:""},onSelectedItemChange:({selectedItem:e})=>!1===o.multiselect&&"function"==typeof o.onChange&&o.onChange(e),onStateChange({type:e,selectedItem:t}){const{ItemClick:l,MenuBlur:c,MenuKeyDownEnter:r,MenuKeyDownSpaceButton:d}=b.stateChangeTypes;(e===l||e===c||e===r||e===d)&&o.multiselect&&t&&(x(ue,t)?be(ue.filter((e=>!p(e,t)))):ae(t),we(null))},stateReducer(e,{type:t,changes:l}){const{ItemClick:c,MenuKeyDownSpaceButton:r}=b.stateChangeTypes;return t!==c&&t!==r||!o.multiselect?l:Object.assign(Object.assign({},l),{isOpen:e.isOpen,highlightedIndex:e.highlightedIndex})}}));o.multiselect||ie({},{suppressRefError:!0});const xe="".concat(ve().id).concat(O?" ".concat(E,"-error"):"").concat(z?" ".concat(E,"-helper"):""," ").concat(he().id),ke=o.multiselect&&0===ue.length||!o.multiselect&&!fe;return e.createElement("div",{className:d(D.root,P&&D.invalid,A&&D.disabled,Ie&&D.open,o.multiselect&&D.multiselect,ee,I),style:X},C&&e.createElement(v,Object.assign({label:C,required:F},ve(),{tooltipLabel:U,tooltipButtonLabel:Z,tooltipText:J})),e.createElement("div",{className:D.wrapper,onFocus:e=>{y(e)&&(ce(!0),W())},onBlur:e=>{j(e)&&(ce(!1),Q())}},o.multiselect&&ue.length>0&&e.createElement(M,{activeIndex:de,clearable:f,clearButtonAriaLabel:o.clearButtonAriaLabel,dropdownId:E,getSelectedItemProps:ne,hideItems:!oe,onClear:()=>me(),onRemove:se,optionLabelField:q,removeButtonAriaLabel:o.selectedItemRemoveButtonAriaLabel,selectedItems:ue,selectedItemSrLabel:o.selectedItemSrLabel,selectedItemsContainerRef:te,setActiveIndex:_e}),e.createElement("button",Object.assign({type:"button"},he(Object.assign(Object.assign(Object.assign({"aria-owns":ge().id,"aria-labelledby":xe},o.multiselect&&Object.assign({},ie({preventKeyAction:Ie}))),P&&{"aria-invalid":!0}),{disabled:A,className:d(D.button,ke&&D.placeholder)}))),!1===o.multiselect&&o.icon&&e.createElement("span",{className:D.icon,"aria-hidden":!0},o.icon),(()=>{let e=(null==fe?void 0:fe[q])||G;return o.multiselect&&(e=ue.length>0?null:G),e})(),e.createElement(n,{className:D.angleIcon,"aria-hidden":!0})),e.createElement(k,{getItemProps:(e,t,l,o,c)=>pe(Object.assign({item:e,index:t,disabled:o,className:d(D.menuItem,Se===t&&D.highlighted,l&&D.selected,o&&D.disabled,V&&D.virtualized)},c&&{style:{transform:"translateY(".concat(c.start,"px")},ref:c.measureRef})),isOptionDisabled:B,menuProps:ge(Object.assign(Object.assign(Object.assign({},o.multiselect&&{"aria-multiselectable":!0}),F&&{"aria-required":!0}),{style:{maxHeight:w*Y},ref:le})),menuStyles:D,multiselect:o.multiselect,open:Ie,optionLabelField:q,options:R,selectedItem:fe,selectedItems:ue,virtualizer:V&&re,visibleOptions:Y})),P&&O&&e.createElement("div",{id:"".concat(E,"-error"),className:D.errorText,"aria-hidden":!0},e.createElement(i,{className:D.invalidIcon}),O),z&&e.createElement("div",{id:"".concat(E,"-helper"),className:D.helperText,"aria-hidden":!0},z))};Q.defaultProps={multiselect:!1};export{Q as S,M as a,N as m,T as o};
