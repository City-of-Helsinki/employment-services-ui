import e,{useCallback as o,useEffect as r,useRef as n,useState as t}from"react";import{c as a}from"./classNames-51fcabcb.js";import{s as l}from"./style-inject.es-4a6aca40.js";import"./Icon.module-e854ac32.js";import{I as c}from"./IconCrossCircle-e27acebb.js";import{I as d}from"./IconSearch-341c11c6.js";import"./base.min-dacc0a02.js";import{b as i}from"./downshift.esm-e321a728.js";import{F as u}from"./FieldLabel-77d98fa7.js";import{a as s,D as m}from"./DropdownMenu-cc760817.js";import{L as p}from"./LoadingSpinner-7786d9a3.js";var h={button:"SearchInput-module_button__z7NIp",hidden:"SearchInput-module_hidden__OcXmJ",input:"SearchInput-module_input__Addns",wrapper:"SearchInput-module_wrapper__114JK",root:"SearchInput-module_root__sMwrY",open:"SearchInput-module_open__1zeft",angleIcon:"SearchInput-module_angleIcon__1PdxN",menu:"SearchInput-module_menu__2P8CO",loadingSpinnerContainer:"SearchInput-module_loadingSpinnerContainer__T6ZTc",overflow:"SearchInput-module_overflow__1Crny",menuItem:"SearchInput-module_menuItem__zIC_d",highlighted:"SearchInput-module_highlighted__3D7Hh",selected:"SearchInput-module_selected__30K7a",disabled:"SearchInput-module_disabled__akdv5",virtualized:"SearchInput-module_virtualized__xRfea",buttons:"SearchInput-module_buttons__2O_2t",searchIcon:"SearchInput-module_searchIcon__l1_S4",noToggle:"SearchInput-module_noToggle__2rf7Y",helperText:"SearchInput-module_helperText__2AWSL",loadingSpinner:"SearchInput-module_loadingSpinner__3G_76"};l(".SearchInput-module_button__z7NIp{background:none;border:none;color:inherit;cursor:pointer;font:inherit;padding:0}.SearchInput-module_button__z7NIp.SearchInput-module_hidden__OcXmJ,.SearchInput-module_input__Addns.SearchInput-module_hidden__OcXmJ:not(:focus){border:0;clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;margin:0 -1px -1px 0;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.SearchInput-module_wrapper__114JK:focus-within{box-shadow:0 0 0 var(--focus-outline-width) var(--focus-outline-color)}.SearchInput-module_root__sMwrY{--border-width:2px;--divider-width:1px;--focus-outline-width:3px;--dropdown-height:var(--spacing-3-xl);--menu-item-height:calc(var(--dropdown-height) - var(--border-width) * 2);--icon-size:var(--spacing-m);--menu-z-index:10;--dropdown-background-default:var(--color-white);--dropdown-background-disabled:var(--color-black-10);--dropdown-border-color-default:var(--color-black-50);--dropdown-border-color-hover:var(--color-black-90);--dropdown-border-color-hover-invalid:var(--color-error-dark);--dropdown-border-color-focus:var(--color-black-90);--dropdown-border-color-invalid:var(--color-error);--dropdown-border-color-disabled:var(--color-black-10);--dropdown-color-default:var(--color-black-90);--dropdown-color-disabled:var(--color-black-40);--focus-outline-color:var(--color-coat-of-arms);--helper-color-invalid:var(--color-error);--menu-divider-color:var(--color-black-20);--menu-item-background-default:var(--color-white);--menu-item-background-hover:var(--color-bus);--menu-item-background-selected:var(--color-white);--menu-item-background-selected-hover:var(--color-bus);--menu-item-background-disabled:var(--color-white);--menu-item-color-default:var(--color-black-90);--menu-item-color-hover:var(--color-white);--menu-item-color-selected:var(--color-black-90);--menu-item-color-selected-hover:var(--color-white);--menu-item-color-disabled:var(--color-black-40);--menu-item-icon-color-selected:var(--color-white);--menu-item-icon-color-disabled:var(--color-black-40);--multiselect-checkbox-background-selected:var(--color-bus);--multiselect-checkbox-background-disabled:var(--color-black-10);--multiselect-checkbox-border-default:var(--color-black-50);--multiselect-checkbox-border-hover:var(--color-black-90);--multiselect-checkbox-border-disabled:var(--color-black-10);--multiselect-checkbox-color-default:transparent;--multiselect-checkbox-color-selected:var(--color-white);--multiselect-checkbox-color-selected-disabled:var(--color-white);--placeholder-color:var(--color-black-60);position:relative}.SearchInput-module_open__1zeft.SearchInput-module_root__sMwrY .SearchInput-module_angleIcon__1PdxN{transform:rotateX(180deg)}.SearchInput-module_open__1zeft.SearchInput-module_root__sMwrY .SearchInput-module_menu__2P8CO{display:block}.SearchInput-module_wrapper__114JK{background-color:var(--dropdown-background-default);border:var(--border-width) solid var(--dropdown-border-color-default);box-sizing:border-box;min-height:var(--dropdown-height);position:relative;width:100%}.SearchInput-module_wrapper__114JK:focus-within{border-color:var(--dropdown-border-color-focus)}.SearchInput-module_wrapper__114JK:hover{border-color:var(--dropdown-border-color-hover)}.SearchInput-module_wrapper__114JK:focus-within,.SearchInput-module_wrapper__114JK:hover{transition:border-color 85ms ease-out}.SearchInput-module_loadingSpinnerContainer__T6ZTc,.SearchInput-module_menu__2P8CO{border:solid var(--dropdown-border-color-focus);border-top-color:var(--menu-divider-color);border-width:var(--divider-width) var(--border-width) var(--border-width);bottom:0;display:none;left:0;list-style:none;margin:0;outline:none;padding:0;position:absolute;transform:translate(calc(var(--border-width) * -1),100%);width:100%;z-index:var(--menu-z-index)}.SearchInput-module_overflow__1Crny.SearchInput-module_loadingSpinnerContainer__T6ZTc,.SearchInput-module_overflow__1Crny.SearchInput-module_menu__2P8CO{overflow-y:scroll}.SearchInput-module_menuItem__zIC_d{align-items:center;background-color:var(--menu-item-background-default);box-sizing:border-box;color:var(--menu-item-color-default);cursor:pointer;display:flex;font-size:var(--fontsize-body-l);justify-content:space-between;line-height:var(--lineheight-m);min-height:var(--menu-item-height);padding:var(--spacing-xs) var(--spacing-s)}.SearchInput-module_highlighted__3D7Hh.SearchInput-module_menuItem__zIC_d{background-color:var(--menu-item-background-hover);color:var(--menu-item-color-hover)}.SearchInput-module_selected__30K7a.SearchInput-module_menuItem__zIC_d{background-color:var(--menu-item-background-selected);color:var(--menu-item-color-selected)}.SearchInput-module_highlighted__3D7Hh.SearchInput-module_selected__30K7a.SearchInput-module_menuItem__zIC_d{background-color:var(--menu-item-background-selected-hover);color:var(--menu-item-color-selected-hover)}.SearchInput-module_disabled__akdv5.SearchInput-module_highlighted__3D7Hh.SearchInput-module_menuItem__zIC_d,.SearchInput-module_disabled__akdv5.SearchInput-module_menuItem__zIC_d{background-color:var(--menu-item-background-disabled);color:var(--menu-item-color-disabled);cursor:not-allowed}.SearchInput-module_virtualized__xRfea.SearchInput-module_menuItem__zIC_d{left:0;position:absolute;top:0;width:100%}.SearchInput-module_root__sMwrY{--helper-color-default:var(--color-black-60)}.SearchInput-module_wrapper__114JK{align-items:center;display:flex}.SearchInput-module_buttons__2O_2t{position:absolute;right:var(--spacing-s);top:var(--spacing-xs);transform:translateY(2px);display:flex}.SearchInput-module_button__z7NIp{color:var(--dropdown-color-default);outline:none;display:flex;margin-left:var(--spacing-xs)}.SearchInput-module_button__z7NIp:focus{outline:none;box-shadow:0 0 0 var(--focus-outline-width) var(--focus-outline-color)}.SearchInput-module_searchIcon__l1_S4{color:var(--dropdown-color-default);display:flex}.SearchInput-module_input__Addns{align-self:stretch;background-color:var(--input-background-default);border:none;box-sizing:border-box;color:var(--input-color-default);font-size:var(--fontsize-body-l);height:var(--menu-item-height);outline:none;padding:0 calc(var(--spacing-l) + var(--icon-size)) 0 0;-webkit-appearance:none;width:100%}.SearchInput-module_input__Addns:first-child{padding-left:var(--spacing-s)}.SearchInput-module_input__Addns.SearchInput-module_noToggle__2rf7Y{padding-right:var(--spacing-s)}.SearchInput-module_input__Addns::placeholder{color:var(--placeholder-color);line-height:normal}.SearchInput-module_input__Addns:disabled::placeholder{color:var(--dropdown-color-disabled)}.SearchInput-module_menuItem__zIC_d .SearchInput-module_highlighted__3D7Hh{font-weight:700}.SearchInput-module_menuItem__zIC_d .SearchInput-module_highlighted__3D7Hh mark{background:none;font-weight:400;color:inherit}.SearchInput-module_helperText__2AWSL{color:var(--helper-color-default);display:block;font-size:var(--fontsize-body-m);margin-top:var(--spacing-3-xs)}.SearchInput-module_loadingSpinnerContainer__T6ZTc{display:flex;flex-direction:column;align-items:center;background-color:var(--menu-item-background-default);text-align:center;padding:var(--spacing-m) 0}.SearchInput-module_loadingSpinner__3G_76{margin-bottom:var(--spacing-2-xs)}");class _ extends Error{}const b=(e,a,l)=>{const c=n(l),[d,i]=t(!1),u=n((()=>null)),[s,m]=t([]);return r((()=>{c.current=l}),[l]),((e,n,t)=>{const a=o(e,t);r((()=>{const e=setTimeout((()=>{a()}),n);return()=>{clearTimeout(e)}}),[a,n])})((()=>{if("function"!=typeof a||!0===c.current)return;if(i(!0),u.current(),0===e.length)return i(!1),void m([]);const{promise:o,cancel:r}=(e=>{let o=!1;return{promise:new Promise(((r,n)=>{e.then((e=>{if(o)throw new _;r(e)})).catch((e=>{e instanceof _||n(e)}))})),cancel:()=>{o=!0}}})(a(e));u.current=r,o.then((e=>{i(!1),Array.isArray(e)&&"function"==typeof m&&!1===c.current&&m(e)}))}),200,[e,a,m]),{suggestions:s,isLoading:!c.current&&d}},g=({className:o,clearButtonAriaLabel:l="Clear",getSuggestions:_,helperText:g,highlightSuggestions:v=!1,label:I,loadingSpinnerFinishedText:S="Finished loading suggestions",loadingSpinnerText:f="Loading suggestions",onSubmit:w,searchButtonAriaLabel:k="Search",style:x,suggestionLabelField:z,visibleSuggestions:y=8})=>{const C=n(null),[T,N]=t(!1),[E,j]=t(""),{suggestions:O,isLoading:P}=b(E,_,T),A=((e,o=3e3)=>{const[a,l]=t(!1),c=n(null);return r((()=>(clearTimeout(c.current),e?c.current=setTimeout((()=>{l(!0)}),o):l(!1),()=>{clearTimeout(c.current)})),[e,o,l]),a})(P,1300),{isOpen:L,getLabelProps:K,getMenuProps:J,getInputProps:D,getComboboxProps:Y,highlightedIndex:F,getItemProps:H,reset:M}=i({items:O,onInputValueChange:e=>{j(e.inputValue)},itemToString:e=>e?"".concat(e[z]):""}),X=()=>{N(!0),w(E)};return e.createElement("div",{className:a(h.root,L&&h.open,o),style:x},I&&e.createElement(u,Object.assign({label:I},K())),e.createElement("div",{className:a(h.wrapper),ref:Y().ref},e.createElement("input",Object.assign({},D({onKeyUp:e=>{const o=e.key||e.keyCode;"Enter"===o||13===o?X():N(!1)},ref:C,role:Y().role,"aria-expanded":Y()["aria-expanded"],"aria-haspopup":Y()["aria-haspopup"],"aria-owns":Y()["aria-owns"]}),{className:a(h.input)})),e.createElement("div",{className:h.buttons},E.length>0&&e.createElement("button",{type:"button","aria-label":l,className:a(h.button),onClick:()=>{M(),C.current.focus()}},e.createElement(c,{className:h.searchIcon,"aria-hidden":!0})),e.createElement("button",{type:"button","aria-label":k,className:a(h.button),onClick:X},e.createElement(d,{className:h.searchIcon,"aria-hidden":!0}))),A&&e.createElement("div",{className:h.loadingSpinnerContainer,"aria-hidden":!0},e.createElement(p,{loadingText:f,loadingFinishedText:S,small:!0,className:h.loadingSpinner}),f),e.createElement(s,{isOptionDisabled:()=>!1,multiselect:!1,open:L&&!A,selectedItem:null,selectedItems:[],highlightValue:v&&E.length>=3&&E,visibleOptions:y,menuStyles:h,options:O,optionLabelField:"".concat(z),menuProps:J({style:{maxHeight:m*y}}),getItemProps:(e,o,r,n)=>H({item:e,index:o,disabled:n,className:a(h.menuItem,r&&h.selected,F===o&&h.highlighted)})})),g&&e.createElement("div",{className:h.helperText},g))};export{g as S};
